<!--
 ~ Copyright 2017 Okta, Inc.
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 -->
<html xmlns:th="http://www.thymeleaf.org">
<head>
   <title>Login</title>
   <!--/*/ <th:block th:include="head :: head"/> /*/-->

   <link href="/css/okta.css" rel="stylesheet" type="text/css"/>

   <script src="https://ok1static.oktacdn.com/assets/js/sdk/okta-auth-js/1.6.0/okta-auth-js.min.js" type="text/javascript"></script>
   <style>
   .fb-button {
   height: 33px; 
   width: 172px;   
   background-image:url('https://i.ibb.co/wsNhM4k/LoginFb.png');
   background-repeat:no-repeat;
   }
   </style>
   <style>
   .ld-button {
   height: 33px; 
   width: 172px;   
   background-image:url('https://i.ibb.co/j6w9RBz/Login-Lnk-In.png');
   background-repeat:no-repeat;
   }
   </style>
   <style>
   .gg-button {
   height: 33px; 
   width: 172px;   
   background-image:url('https://i.ibb.co/wYDRx46/loginG.png');
   background-repeat:no-repeat;
   }
   </style>
   <style>
   .univ-button {
   height: 28px; 
   width: 172px;   
   background-repeat:no-repeat;
   }
   </style>
   
</head>
<body id="samples" class="login">
<div th:replace="menu :: menu" id="sign-in-widget"></div>
<div id="content" class="container">
<a href="https://imgbb.com/"><img src="https://i.ibb.co/DCyGKc1/cengage.png" alt="cengage" border="0"></a>

<h1>Enter Username & Password</h1>
<form class="form-inline" onsubmit="doIt()">
   <label class="sr-only" for="email">Email</label>
   <input type="text" class="form-control mb-2 mr-sm-2" id="email" placeholder="email">

   <label class="sr-only" for="email">Password</label>
   <input type="password" class="form-control mb-2 mr-sm-2" id="password" placeholder="password">

</form>

<p><input type="button" class="btn btn-primary mb-2" onclick="javascript:doIt()" value="Login&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"></p>
<div class="fb-login-button" data-max-rows="1" data-size="large" data-button-type="continue_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="false"></div>
<p>or</p>
<p><input type="button" class="fb-button" onclick="javascript:doIt('0oa2bun0xsg66oORh0i7')" value=""><input type="button" class="ld-button" onclick="javascript:doIt('0oa2eaoa6qdmnZkCb0i7')" value=""></p>
<p><input type="button" class="univ-button" onclick="javascript:doIt('0oa2dzml18GWcrc9L0i7')" value="Login with University"><input type="button" class="gg-button" onclick="javascript:doIt('0oa2eg3rw1L4RQapl0i7')" value=""></p>





<script th:inline="javascript">
   /*<![CDATA[*/

   var config = {};

   config.url = /*[[${oktaBaseUrl}]]*/ 'https://{yourOktaDomain}';
   config.clientId = /*[[${oktaClientId}]]*/ '{oktaClientId}';
   config.redirectUri = /*[[${redirectUri}]]*/ '{redirectUri}';
   config.logo = 'https://spring.io/img/homepage/icon-spring-cloud.svg';
   config.issuer = /*[[${issuerUri}]]*/ '{issuerUri}';
   config.authParams = {
       responseType: 'code',
       state: /*[[${state}]]*/ '{state}' || false,
       scopes: /*[[${scopes}]]*/ '[scopes]',
       display: 'page',
       responseMode: 'query'
   };

   var authClient = new OktaAuth(config);
   function doIt(idp) {
       if(idp){
           config.authParams.idp=idp
           authClient.token.getWithRedirect(config.authParams)
       }else{                    
       authClient.signIn({
           username: document.getElementById("email").value,
           password: document.getElementById("password").value
       })
           .then(function (transaction) {
               console.log(transaction.sessionToken)
               if (transaction.status === 'SUCCESS') {
                   
                   config.authParams.sessionToken = transaction.sessionToken
                       authClient.token.getWithRedirect(config.authParams)
               }
           })
       }
   }

   /*]]>*/
</script>
</div>
</body>
</html>